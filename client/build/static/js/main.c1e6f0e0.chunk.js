(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{1021:function(e,t,a){},1036:function(e,t,a){e.exports=a.p+"static/media/la_6.1409de5e.jpg"},1040:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),l=a.n(i),o=(a(558),a(150)),s=a(104),c=a(28),u=a.n(c);function m(){return{type:"auth_user",payload:u.a.get("".concat("/api/users","/auth")).then((function(e){return e.data}))}}var d=a(40),p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;function i(i){var l=Object(d.c)((function(e){return e.user})),o=Object(d.b)();return Object(n.useEffect)((function(){o(m()).then((function(e){e.payload.isAuth?(a&&!e.payload.isAdmin||!1===t)&&i.history.push("/"):t&&i.history.push("/login")}))}),[]),r.a.createElement(e,Object.assign({},i,{user:l}))}return i},g=a(1089),h=a(345),f=a.n(h),E=a(346),v=a.n(E),b=a(1086);a(347);var y=a(33),S=a(34),k=a(35),O=a(36),j=a(1100),w=a(523),x=a.n(w),D=a(1074),_=a(160),T=a(24),C=a(121),N=a(1084),M=a(1083),I=a(1103),P=a(1087),A=a(1101),R=a(1088),F=a(1085),V=a(230),L=a(1075),B=a(1102),q=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).getData=function(){fetch("https://cse6242-backend.herokuapp.com/travel-planner/0-preprocess",{method:"GET"}).then((function(e){return e.json()})).then((function(e){n.setState({category:e.attraction_categories,isChecked:Array(e.attraction_categories.length).fill(!1)})}))},n.handleCheck=function(e){var t=e.target.name;if(t=t.split("-"),e.target.checked){n.state.isChecked[t[1]]=!0;var a=n.state.category,r=[];n.state.isChecked.forEach((function(e,t){1==e&&r.push(a[t].key)})),(0,n.props.func)(r)}else n.state.isChecked[t[1]]=!1,console.log(n.state.isChecked)},n.state={cate_1:[]},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=[];if(this.state.category){var a,n=Object(V.a)(this.state.category);try{for(n.s();!(a=n.n()).done;){var i=a.value;t.push(i.name)}}catch(l){n.e(l)}finally{n.f()}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{variant:"h6",gutterBottom:!0},"Destination Categories"),r.a.createElement(D.a,{container:!0,spacing:3},t.map((function(t,a){return r.a.createElement(D.a,Object(C.a)({key:t.key,item:!0,xs:12,sm:6},"key",a),r.a.createElement(L.a,{control:r.a.createElement(B.a,{color:"secondary",name:"checkedbox-"+a,value:"yes",onChange:function(t){return e.handleCheck(t)}}),label:t}))}))))}}]),a}(r.a.Component),W=a(1091),H=a(56),z=[{featureType:"administrative",elementType:"all",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2e5d4"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{featureType:"road",elementType:"all",stylers:[{lightness:20}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"on"},{color:"#acbcc9"}]}],U=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(y.a)(this,n),(a=t.call(this,e)).findNavigationRoute=function(e,t){var n=e.map((function(e){return{location:{lat:e.latitude,lng:e.longitude},stopover:!0}})),r=n.shift().location,i=n.pop().location;(new google.maps.DirectionsService).route({origin:r,destination:i,travelMode:t,waypoints:n,avoidHighways:!0},(function(e,t){if(t===google.maps.DirectionsStatus.OK){var n=a.props.onDirectionFound;console.log(e),void 0!==n&&n(e),a.setState({directions:e})}else a.setState({error:e})}))},a.state={directions:null,error:null,length:0},a}return Object(S.a)(n,[{key:"componentDidMount",value:function(){console.log(this.props.places);var e=this.props,t=e.places,a=e.travelMode;e.navigate&&this.props.places.length>0&&this.findNavigationRoute(t,a)}},{key:"componentDidUpdate",value:function(e,t){var a=this;if(this.props.places!==this.state.places){var n=this.state;n.places,n.travelMode;this.setState({length:this.props.places.length,places:this.props.places},(function(){a.props.navigate&&a.state.places.length>0&&a.findNavigationRoute(a.state.places,a.props.travelMode)}))}return null}},{key:"render",value:function(){return this.state.error?r.a.createElement("h1",null,this.state.error):r.a.createElement("div",null,r.a.createElement("div",null,this.props.navigate?this.state.directions&&r.a.createElement(H.DirectionsRenderer,{directions:this.state.directions}):this.props.navigationResult&&r.a.createElement(H.DirectionsRenderer,{directions:this.props.navigationResult})),r.a.createElement("div",null,!this.props.navigate&&this.props.navigationResult&&r.a.createElement(H.Marker,{style:{height:"15px",zIndex:-100},position:this.props.navigationResult.routes[0].legs[0].start_location,icon:{url:a(301),scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)}})),r.a.createElement("div",null,this.state.directions&&r.a.createElement(H.Marker,{style:{height:"15px",zIndex:-100},position:this.state.directions.routes[0].legs[0].start_location,icon:{url:a(301),scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)}})))}}]),n}(r.a.Component),G=Object(H.withScriptjs)(Object(H.withGoogleMap)((function(e){return r.a.createElement(H.GoogleMap,{defaultCenter:e.defaultCenter,defaultZoom:e.defaultZoom,defaultOptions:{styles:z}},e.markers?e.markers.map((function(t,n){var i={lat:t.latitude,lng:t.longitude};return e.navigate?null:r.a.createElement("div",{key:"map_div"+n},r.a.createElement(H.Marker,{style:{height:"15px"},key:n,position:i,icon:{url:a(740),scaledSize:new google.maps.Size(40,40)}}),r.a.createElement(H.Circle,{key:"circle"+n,defaultCenter:i,radius:500,options:{strokeWeight:0,fillColor:"#78CEAC"}}))})):r.a.createElement("div",null),e.curLocation?r.a.createElement(H.Marker,{style:{height:"15px"},position:{lat:e.curLocation.latitude,lng:e.curLocation.longitude},icon:{url:a(301),scaledSize:new google.maps.Size(30,30),anchor:new google.maps.Point(15,15)}}):r.a.createElement("div",null),e.markers_attraction?e.markers_attraction.map((function(t,n){var i={lat:t.location.latitude,lng:t.location.longitude};return e.navigate?null:r.a.createElement(H.Marker,{style:{height:"15px"},key:"2"+n,position:i,icon:{url:a(741),scaledSize:new google.maps.Size(30,30)}},e.mouseOver==t.name?r.a.createElement(H.InfoWindow,null,r.a.createElement("div",{style:{color:"black"}},t.name)):r.a.createElement("div",null))})):r.a.createElement("div",null),r.a.createElement(U,{places:e.markers,travelMode:google.maps.TravelMode.DRIVING,navigate:e.navigate,onDirectionFound:e.func,navigationResult:e.navigationResult}),r.a.createElement("div",{id:"panel"}))}))),J=a(157),Q=a(1077),Z=a(1076),X=a(1078),Y=a(1081),K=a(1079),$=a(1080),ee=a(1082),te=a(182),ae=a.n(te),ne=a(183),re=a.n(ne),ie=(a(742),a(1041)),le=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).handleMouseOver=function(e){return function(){(0,n.props.handleMouseOver)(e)}},n.handleMouseOut=function(e){return function(){(0,n.props.handleMouseOut)(e)}},n.handleClick=function(){n.setState({open:!n.state.open})},n.handleToggle=function(e){return function(){var t=n.state.checked.indexOf(e),a=Object(J.a)(n.state.checked),r=n.props.handleSelection;-1===t?a.push(e):a.splice(t,1),n.setState({checked:a}),r(a,n.props.item.parking_lot.name)}},n.handleTime=function(e){return function(t){var a=n.state.time;a[e]=t.target.value;var r=n.props.handleData;n.setState({time:a},(function(){})),r(a)}},n.state={open:!1,checked:[],time:{}},n}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;this.state.checked;return r.a.createElement(Z.a,{className:t.root,component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Q.a,{component:"div",id:"nested-list-subheader"})},r.a.createElement(X.a,{button:!0,onClick:this.handleClick},r.a.createElement(K.a,{primary:this.props.item.parking_lot.name}),this.state.open?r.a.createElement(ae.a,null):r.a.createElement(re.a,null)),r.a.createElement($.a,{in:this.state.open,timeout:"auto",unmountOnExit:!0},r.a.createElement(Z.a,{component:"div",disablePadding:!0},this.props.item.attractions.map((function(t){var a="checkbox-list-label-".concat(t.name);return r.a.createElement(X.a,{key:t.name,role:void 0,dense:!0,button:!0,onClick:e.handleToggle(t.name),onMouseOver:e.handleMouseOver(t.name),onMouseOut:e.handleMouseOut(t.name)},r.a.createElement(Y.a,null,r.a.createElement(B.a,{edge:"start",tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":a},checked:-1!==e.state.checked.indexOf(t.name)})),r.a.createElement(K.a,{id:a,primary:"".concat(t.name)}),r.a.createElement(ee.a,null,r.a.createElement("input",{type:"number",onChange:e.handleTime(t.name),placeholder:e.state.time[t.name]?e.state.time[t.name]:"30",disabled:-1==e.state.checked.indexOf(t.name)?"disabled":""})))})))))}}]),a}(r.a.Component),oe=Object(ie.a)((function(e){return{root:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}}))(le);function se(e){var t=e.item,a=e.handleData,n=e.handleSelection,i=e.handleMouseOver,l=e.handleMouseOut;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{container:!0,spacing:3,style:{width:"100%"}},r.a.createElement(oe,{item:t,handleData:a,handleSelection:n,handleMouseOver:i,handleMouseOut:l})))}var ce=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).processInputData=function(e){n.setState({attraction_groups:e.attraction_groups})},n.processMapData=function(e){for(var t in e.attraction_groups){var a=e.attraction_groups[t].parking_lot.location,r=n.state.places,i=n.state.places_attraction;for(var l in e.attraction_groups[t].attractions){var o=e.attraction_groups[t].attractions[l];i.push(o)}r.push(a),n.setState({places:r,places_attraction:i,curLocation:e.current_location})}},n.handleMouseOver=function(e){n.setState({mouseOver:e})},n.handleMouseOut=function(e){n.setState({mouseOver:""})},n.setDepartureTime=function(e){var t=n.props.func2;n.setState({departureTime:e.target.value},(function(){t(n.state.departureTime)}))},n.handleDetailData=function(e){var t=n.props.func;n.setState({timeDict:e},(function(){console.log(n.state.timeDict),t(n.state.selectedPlaces,n.state.timeDict)}))},n.handleSelection=function(e,t){console.log("handleSelection",e,t);var a=n.state.selectedPlaces,r=n.props.func;a[t]=e,n.setState({selectedPlaces:a},(function(){console.log(n.state.selectedPlaces),r(n.state.selectedPlaces,n.state.timeDict)}))},n.state={totalTime:0,inputData:null,places:[],selectedPlaces:{},places_attraction:[],mouseOver:"",curLocation:null,departureTime:"08:30"},n}return Object(S.a)(a,[{key:"componentDidUpdate",value:function(){var e=this;console.log("componentDidUpdate"),this.props.data&&null==this.state.inputData&&this.setState({inputData:this.props.data},(function(){console.log("Step 1 data: ",e.state.inputData),e.processInputData(e.state.inputData),e.processMapData(e.state.inputData)}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.data2;return void 0!=a&&(a=JSON.parse(a)),r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyD-9UDS1WHVVTiZjXjGxIUJZBGeaHTB7aI&libraries=geometry,drawing,places",markers:this.state.places,markers_attraction:this.state.places_attraction,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"45vh"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),defaultCenter:{lat:34.068387,lng:-118.359502},defaultZoom:12,navigate:!1,mouseOver:this.state.mouseOver,curLocation:this.state.curLocation}),r.a.createElement(_.a,{variant:"h6",gutterBottom:!0},"More detail of places to visit"),r.a.createElement(D.a,{container:!0,spacing:3},r.a.createElement(D.a,{item:!0,xs:12,sm:6},this.state.attraction_groups?this.state.attraction_groups.map((function(t,a){return r.a.createElement(se,{key:a,item:t,handleMouseOver:e.handleMouseOver,handleMouseOut:e.handleMouseOut,handleData:e.handleDetailData,handleSelection:e.handleSelection})})):r.a.createElement("div",null)),r.a.createElement(D.a,{item:!0,xs:12,sm:6},r.a.createElement("form",{className:t.timeContainer,noValidate:!0,style:{paddingLeft:"48px"}},r.a.createElement(W.a,{id:"time",label:"Departure Time",type:"time",value:this.state.departureTime,className:t.timeTextField,InputLabelProps:{shrink:!0},inputProps:{step:300},onChange:this.setDepartureTime})),r.a.createElement(Z.a,{disablePadding:!0,className:t.root,subheader:r.a.createElement("li",null)},a?a.attraction_groups.map((function(e,a){return r.a.createElement("li",{key:"".concat(a),className:t.listSection},r.a.createElement("ul",{className:t.ul},r.a.createElement(Q.a,null,e.parking_lot.name),e.attractions.map((function(e,t){return r.a.createElement(X.a,{key:"attraction-".concat(a,"-").concat(t)},r.a.createElement(K.a,{primary:e.name}),r.a.createElement(_.a,{variant:"body2"},"Stay "+e.estimate_time+" min"))}))))})):r.a.createElement("div",null)))))}}]),a}(r.a.Component),ue=Object(ie.a)((function(e){return{root:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper},listSection:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper},ui:{paddingLeft:e.spacing(0)},timeContainer:{display:"flex",flexWrap:"wrap"},timeTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200}}}))(ce),me=Object(N.a)((function(e){return{listItem:{padding:e.spacing(1,0)},total:{fontWeight:"700"},title:{marginTop:e.spacing(2)}}}));function de(e){var t=me();console.log(e.data);var a=function(e){var t=e.routes[0].legs,a=0;t.forEach((function(e){a+=e.duration.value}));var n=0,r=0;return a>=60&&(n=Math.floor(a/60),a%=60,n>=60&&(r=Math.floor(n/60),n%=60)),r.toString()+" hr "+n.toString()+" min "+a.toString()+" sec"}(e.data);return console.log("result data: ",e.data2),r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyD-9UDS1WHVVTiZjXjGxIUJZBGeaHTB7aI&libraries=geometry,drawing,places",markers:pe,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"60vh"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),defaultCenter:{lat:25.798939,lng:-80.291409},defaultZoom:11,navigate:!1,navigationResult:e.data}),r.a.createElement(_.a,{variant:"h6",gutterBottom:!0},"Ready to set off!"),r.a.createElement(Z.a,{disablePadding:!0},e.data2.attraction_groups.map((function(a,n){return r.a.createElement("div",{key:n},e.data2.restaurants.lunch&&e.data2.restaurants.lunch.after_group_id+1===n?r.a.createElement(X.a,{className:t.listItem,key:"lunch"+n},r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,"Lunch here"),primary:e.lunch}),r.a.createElement(ee.a,null,r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,"---"),primary:"Stop for 60 min"}))):r.a.createElement("div",null),e.data2.restaurants.dinner&&e.data2.restaurants.dinner.after_group_id+1===n?r.a.createElement(X.a,{className:t.listItem,key:"dinner"+n},r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,"Dinner here"),primary:e.dinner}),r.a.createElement(ee.a,null,r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,"---"),primary:"Stop for 60 min"}))):r.a.createElement("div",null),a.attractions.map((function(e){return r.a.createElement(X.a,{className:t.listItem,key:"list"+n},r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,a?"Park at: "+a.parking_lot.name:"From current location"),primary:e.name}),r.a.createElement(ee.a,{key:"listSecondaryAction"+n},r.a.createElement(K.a,{secondary:r.a.createElement(r.a.Fragment,null,a.travel_times.estimate_start_time+" - "+a.travel_times.estimate_end_time),primary:"Stop for "+e.estimate_time+" min"})))})))})),r.a.createElement(X.a,{className:t.listItem},r.a.createElement(K.a,{primary:"Total Driving Time"}),r.a.createElement(_.a,{variant:"subtitle1",className:t.total},a))))}var pe=[{latitude:25.8103146,longitude:-80.1751609},{latitude:27.9947147,longitude:-82.5943645},{latitude:28.4813018,longitude:-81.4387899}],ge=a(1096),he=function(e){Object(O.a)(n,e);var t=Object(k.a)(n);function n(e){var r;return Object(y.a)(this,n),(r=t.call(this,e)).processInputData=function(e){e.restaurants.lunch&&r.setState({attraction_groups:e.attraction_groups,lunchTiming:e.restaurants.lunch.after_group_id,lunch:e.restaurants.lunch.restaurants,catagory:e.restaurant_categories}),e.restaurants.dinner&&r.setState({dinnerTiming:e.restaurants.dinner.after_group_id,dinner:e.restaurants.dinner.restaurants})},r.processMapData=function(e){console.log("processMapData");var t=a(883),n=e.current_location,i=r.state.places;for(var l in i.push(n),e.attraction_groups){var o=e.attraction_groups[l].parking_lot.location;i.push(o);var s=t(i);r.setState({places:i,newPlaces:s})}},r.handleChangeLunch=function(e){return function(t){var a=r.props.func2,n=Object.assign([],r.state.places);n.splice(r.state.lunchTiming+2,0,{latitude:e.latitude,longitude:e.longitude}),r.setState({newPlaces:n,checkedRadioLunch:e.name},(function(){a(e.name),console.log("state",r.state.newPlaces)}))}},r.handleChangeDinner=function(e){return function(t){var a=r.props.func3,n=Object.assign([],r.state.newPlaces);r.state.lunchTiming,n.splice(r.state.dinnerTiming+3,0,{latitude:e.latitude,longitude:e.longitude}),r.setState({newPlaces:n,checkedRadioDinner:e.name},(function(){a(e.name),console.log("state",r.state.newPlaces)}))}},r.onDirectionFound=function(e){console.log(e);var t=r.props.func;e&&t&&t(e)},r.handleClick=function(e){console.log(e);var t=r.state.open,a=!1;0==t[e]&&(a=!0),t=[!1,!1,!1,!1,!1,!1],a&&(t[e]=!0),r.setState({open:t})},r.handleClickDinner=function(e){var t=r.state.openDinner,a=!1;0==t[e]&&(a=!0),t=[!1,!1,!1,!1,!1,!1],a&&(t[e]=!0),r.setState({openDinner:t})},r.state={checkedLunch:[0],checkedDinner:[0],inputData:null,places:[],newPlaces:[],open:[!1,!1,!1,!1,!1,!1],openDinner:[!1,!1,!1,!1,!1,!1],checked:[],time:{},checkedRadioLunch:"",checkedRadioDinner:"",catagory:[]},r}return Object(S.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.data&&null==this.state.inputData&&this.setState({inputData:this.props.data},(function(){console.log("Step 3 data: ",e.state.inputData),e.processInputData(e.state.inputData),e.processMapData(e.state.inputData)}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyD-9UDS1WHVVTiZjXjGxIUJZBGeaHTB7aI&libraries=geometry,drawing,places",markers:this.state.newPlaces,loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"45vh"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),defaultCenter:{lat:34.043146,lng:-118.26727},defaultZoom:11,navigate:!0,func:this.onDirectionFound}),r.a.createElement(_.a,{variant:"h4",color:"textPrimary",style:{paddingTop:"30px"}},"Seems like you need to have a food break in your trip"),r.a.createElement(_.a,{variant:"h5",color:"textSecondary",gutterBottom:!0},"Let us help you pick a decent restaurant along the way!"),r.a.createElement(D.a,{container:!0,spacing:3},r.a.createElement(D.a,{item:!0,xs:12,sm:4},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0,style:{textAlign:"center"}},"Lunch"),r.a.createElement(r.a.Fragment,null,this.state.lunch?this.state.catagory.map((function(a,n){return r.a.createElement(Z.a,{key:a+n,className:t.root,component:"nav","aria-labelledby":"nested-list-subheader"},r.a.createElement(X.a,{button:!0,onClick:function(){return e.handleClick(n)}},r.a.createElement(K.a,{primary:a.name}),e.state.open[n]?r.a.createElement(ae.a,null):r.a.createElement(re.a,null)),r.a.createElement($.a,{in:e.state.open[n],timeout:"auto",unmountOnExit:!0},r.a.createElement(Z.a,{component:"div",disablePadding:!0},e.state.lunch.map((function(t){if(t.style.includes(a.key)){var n="checkbox-list-label-".concat(t.name);return r.a.createElement(X.a,{key:t.name,role:void 0,dense:!0,button:!0,onClick:e.handleChangeLunch(t)},r.a.createElement(Y.a,null,r.a.createElement(L.a,{control:r.a.createElement(ge.a,null),checked:e.state.checkedRadioLunch===t.name,tabIndex:-1,onChange:e.handleChangeLunch(t)})),r.a.createElement(K.a,{id:n,primary:"".concat(t.name),secondary:r.a.createElement(r.a.Fragment,null,t.rating+" . "+t.price)}))}})))))})):r.a.createElement("div",null))),r.a.createElement(D.a,{item:!0,xs:12,sm:4,style:{textAlign:"center"}},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0},this.state.lunch?r.a.createElement("div",null,r.a.createElement(_.a,{variant:"h5",color:"textSecondary",gutterBottom:!0,style:{textAlign:"center"}},"Lunch Time:"),(this.state.lunchTiming,r.a.createElement("div",null,r.a.createElement(_.a,{variant:"h5",color:"textSecondary",gutterBottom:!0,style:{textAlign:"center"}},"From ",this.state.attraction_groups[this.state.lunchTiming].travel_times.estimate_end_time)))):r.a.createElement("div",null),this.state.dinner?r.a.createElement("div",null,r.a.createElement(_.a,{variant:"h5",color:"textSecondary",gutterBottom:!0,style:{textAlign:"center"}},"Dinner Time:"),(this.state.dinnerTiming,r.a.createElement("div",null,r.a.createElement(_.a,{variant:"h5",color:"textSecondary",gutterBottom:!0,style:{textAlign:"center"}},"From ",this.state.attraction_groups[this.state.dinnerTiming].travel_times.estimate_end_time)))):r.a.createElement("div",null))),r.a.createElement(D.a,{item:!0,xs:12,sm:4},r.a.createElement(_.a,{variant:"h4",gutterBottom:!0,style:{textAlign:"center"}},"Dinner"),r.a.createElement(r.a.Fragment,null,this.state.dinner?this.state.catagory.map((function(a,n){return r.a.createElement(Z.a,{key:a+n,className:t.root,component:"nav","aria-labelledby":"nested-list-subheader"},r.a.createElement(X.a,{button:!0,onClick:function(){return e.handleClickDinner(n)}},r.a.createElement(K.a,{primary:a.name}),e.state.openDinner[n]?r.a.createElement(ae.a,null):r.a.createElement(re.a,null)),r.a.createElement($.a,{in:e.state.openDinner[n],timeout:"auto",unmountOnExit:!0},r.a.createElement(Z.a,{component:"div",disablePadding:!0},e.state.dinner.map((function(t){if(t.style.includes(a.key)){var n="checkbox-list-label-".concat(t.name);return r.a.createElement(X.a,{key:t.name,role:void 0,dense:!0,button:!0,onClick:e.handleChangeDinner(t)},r.a.createElement(Y.a,null,r.a.createElement(L.a,{control:r.a.createElement(ge.a,null),checked:e.state.checkedRadioDinner===t.name,tabIndex:-1,disableRipple:!0,onChange:e.handleChangeDinner(t)})),r.a.createElement(K.a,{id:n,primary:"".concat(t.name),secondary:r.a.createElement(r.a.Fragment,null,t.rating+" . "+t.price)}))}})))))})):r.a.createElement("div",null)))))}}]),n}(r.a.Component),fe=Object(ie.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},listSection:{width:"100%",maxWidth:600,backgroundColor:e.palette.background.paper},ui:{paddingLeft:e.spacing(0)}}}))(he);function Ee(){return r.a.createElement(_.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(F.a,{color:"inherit",href:"https://material-ui.com/"},"996 Studio")," ",(new Date).getFullYear(),".")}var ve=Object(N.a)((function(e){return{appBar:{position:"relative"},layout:Object(C.a)({width:"auto",paddingTop:e.spacing(1),marginLeft:e.spacing(1),marginRight:e.spacing(1)},e.breakpoints.up(1400+2*e.spacing(1)),{width:1e3,marginLeft:"auto",marginRight:"auto"}),paper:Object(C.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}})),be=["Destination categories","Places to visit","Restaurant choice","Journey summary"];function ye(e){var t=ve();console.log(e.step);var a=r.a.useState(e.step||0),n=Object(T.a)(a,2),i=n[0],l=n[1],o=r.a.useState(),s=Object(T.a)(o,2),c=(s[0],s[1],r.a.useState()),u=Object(T.a)(c,2),m=u[0],d=u[1],p=r.a.useState(),g=Object(T.a)(p,2),h=g[0],f=g[1],E=r.a.useState(),v=Object(T.a)(E,2),y=v[0],S=v[1],k=r.a.useState(),O=Object(T.a)(k,2),j=O[0],w=O[1],x=r.a.useState(),D=Object(T.a)(x,2),C=D[0],N=D[1],F=r.a.useState(),V=Object(T.a)(F,2),L=V[0],B=V[1],W=r.a.useState(),H=Object(T.a)(W,2),z=H[0],U=H[1],G=r.a.useState(new Map),J=Object(T.a)(G,2),Q=J[0],Z=J[1],X=r.a.useState("07:30"),Y=Object(T.a)(X,2),K=Y[0],$=Y[1],ee=function(e){var t=e.split(":"),a=parseInt(t[0]),n=parseInt(t[1]);if($(e),y){(r=JSON.parse(y)).departure_time=[a,n],S(JSON.stringify(r))}else{var r={departure_time:[a,n],attraction_groups:[]};S(JSON.stringify(r))}},te=function(e,t){for(var a in t)Z(new Map(Q.set(a,t[a])));if(e){var n=h.attraction_groups,r=[];y&&(r=y.attraction_groups||[]),n.forEach((function(t){var a=t.parking_lot.name;if(e[a]){var n=e[a],i=[];t.attractions.forEach((function(e){if(-1!==n.indexOf(e.name)){var t=e.name;Q.get(t)?e.estimate_time=parseInt(Q.get(t)):e.estimate_time=30,i.push(e)}}));var l=!1;if(r.forEach((function(e,t){e.name==a&&(r[t].attractions=i,l=!0)})),!l){var o={parking_lot:t.parking_lot,attractions:i};r.push(o)}}}));var i=K.split(":"),l={departure_time:[parseInt(i[0]),parseInt(i[1])],attraction_groups:r};console.log(l),S(JSON.stringify(l))}else console.log("not ready yet")},ae=function(){console.log(window.pageYOffset),window.scroll(0,-window.pageYOffset)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("main",{className:t.layout},r.a.createElement(M.a,{className:t.paper},r.a.createElement(_.a,{component:"h1",variant:"h4",align:"center"},i===be.length?"Hope to see you soon":"Tailor your next journey"),r.a.createElement(I.a,{activeStep:i,className:t.stepper},be.map((function(e){return r.a.createElement(P.a,{key:e},r.a.createElement(A.a,null,e))}))),r.a.createElement(r.a.Fragment,null,i===be.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{variant:"h5",gutterBottom:!0},"Thank you for planning your next trip with us!"),r.a.createElement(_.a,{variant:"subtitle1"},"Hope you have a wonderful trip.")):r.a.createElement(r.a.Fragment,null,function(t){switch(console.log(t),t){case 0:return r.a.createElement(q,{func:d});case 1:return r.a.createElement(ue,{data:h,data2:y,func:te,func2:ee});case 2:return r.a.createElement(fe,{data:j,func:N,func2:B,func3:U});case 3:return r.a.createElement(de,{data:e.sideEditorMap?e.sideEditorMap:C,data2:e.sideEditorData?e.sideEditorData:j,lunch:L,dinner:z});default:throw new Error("Unknown step")}}(i),r.a.createElement("div",{className:t.buttons},0!==i&&r.a.createElement(R.a,{onClick:function(){l(i-1)},className:t.button},"Back"),r.a.createElement(R.a,{variant:"contained",color:"primary",onClick:function(){var t=e.setWelcomeVisible,a=e.setSideEditorVisible,n=e.setSideEditorData,r=e.setSideEditorMap;if(ae(),0==i){a(!1),t(!1),console.log(m);var o={attraction_categories:m};fetch("https://cse6242-backend.herokuapp.com/travel-planner/1-get-attraction-groups",{method:"POST",body:JSON.stringify(o),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){f(e)}))}else 1==i?fetch("https://cse6242-backend.herokuapp.com/travel-planner/2-get-route-restaurant/",{method:"POST",body:y,headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){w(e),n(e)})):2==i?(r(C),a(!0)):3==i&&a(!1);l(i+1)},className:t.button},i===be.length-1?"Ready to go":"Next"))))),r.a.createElement(Ee,null)))}var Se=a(518),ke=a.n(Se),Oe=a(519),je=a.n(Oe);function we(e){var t=Object(d.c)((function(e){return e.user})),a=Object(n.useState)(""),i=Object(T.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)({}),c=Object(T.a)(s,2),u=c[0],m=c[1],p=function(a,n){var r=n.getData();console.log({event:a,editor:n,data:r});var i=u;i[n.id]=r,m(i),console.log("contentDict cahnges: ",u);var s="";Object.keys(u).map((function(e,t){s+=u[e]})),o(s),console.log("content cahnges: ",l);var c={content:l,author:t.userData._id};e.postVariables(c)},g=function(a){console.log("Editor is ready to use!",a);var n="";e.data.attraction_groups.map((function(e,t){e.attractions.map((function(e){n+="<h1><strong>"+e.name+"</strong></h1><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>"}))}));var r={content:n,author:t.userData._id};e.postVariables(r)};return r.a.createElement("div",null,e.data.attraction_groups.map((function(e,t){return e.attractions.map((function(e){return r.a.createElement("div",{key:t,style:{margin:"20px auto 20px auto",backgroundColor:"white"}},r.a.createElement(ke.a,{editor:je.a,placeholder:"Start making some notes!",data:"<h1><strong>"+e.name+"</strong></h1><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>",onInit:g,onChange:p,onBlur:function(e,t){console.log("Blur.",t)},onFocus:function(e,t){console.log("Focus.",t)}}))}))})))}var xe=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).setWelcomeVisible=function(e){console.log(e),n.setState({displayWelcome:e})},n.setSideEditorVisible=function(e){console.log("setSideEditorVisible ",e),n.state.isMounted&&n.setState({displaySideEditor:e}),1==e&&n.setState({SideEditorInitial:!1}),0==e&&0==n.state.SideEditorInitial&&u.a.post("/api/blog/createPost",n.state.postVariables).then((function(e){console.log(e),e.data.success&&(j.a.success("Post Created"),setTimeout((function(){n.props.history.push("/")}),5e3))}))},n.setSideEditorData=function(e){console.log(e),n.setState({SideEditorData:e})},n.setSideEditorMap=function(e){console.log(e),n.setState({SideEditorMap:e})},n.setPostVariables=function(e){n.state.isMounted&&n.setState({postVariables:e})},n.state={displayWelcome:!0,displaySideEditor:!1,SideEditorInitial:!0,isMounted:!1,postVariables:{},SideEditorData:{},SideEditorMap:{}},n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this.setState({isMounted:!0})}},{key:"render",value:function(){return r.a.createElement("div",{style:{width:"80%",margin:"auto"}},!0===this.state.displayWelcome?r.a.createElement("div",{style:{textAlign:"left",paddingTop:"80px",margin:"auto 300px auto 300px"}},r.a.createElement(_.a,{variant:"h2",color:"primary",gutterBottom:!0,style:{fontWeight:"bold"}},"Good morning!"),r.a.createElement(_.a,{variant:"h2",color:"primary",style:{color:"white",fontWeight:"bold"}},"Where you feel like going today?")):r.a.createElement("div",null),!0===this.state.displaySideEditor?r.a.createElement(D.a,{container:!0,spacing:5,style:{margin:"auto"}},r.a.createElement(D.a,{item:!0,xs:9},r.a.createElement(ye,{setWelcomeVisible:this.setWelcomeVisible,setSideEditorVisible:this.setSideEditorVisible,setSideEditorData:this.setSideEditorData,setSideEditorMap:this.setSideEditorMap,sideEditorData:this.state.SideEditorData,sideEditorMap:this.state.SideEditorMap,step:3})),!0===this.state.displaySideEditor?r.a.createElement(D.a,{item:!0,xs:3},r.a.createElement("div",{style:{textAlign:"left",paddingTop:"80px"}},r.a.createElement(we,{postVariables:this.setPostVariables,data:this.state.SideEditorData}))):r.a.createElement("div",null)):r.a.createElement("div",null,!1===this.state.SideEditorInitial?r.a.createElement(ye,{setWelcomeVisible:this.setWelcomeVisible,setSideEditorVisible:this.setSideEditorVisible,setSideEditorData:this.setSideEditorData,setSideEditorMap:this.setSideEditorMap,step:4}):r.a.createElement(ye,{setWelcomeVisible:this.setWelcomeVisible,setSideEditorVisible:this.setSideEditorVisible,setSideEditorData:this.setSideEditorData,setSideEditorMap:this.setSideEditorMap})))}}]),a}(n.Component),De=x()({form:{textAlign:"center"},image:{margin:"20px auto 20px auto"},paper:{paddingTop:"50px"}})(xe),_e=a(252),Te=a(65),Ce=a(1094),Ne=a(1093),Me=a(1097),Ie=a(20),Pe=a(1098),Ae=a(355),Re=Ce.a.Title;var Fe=Object(s.f)((function(e){var t=Object(d.b)(),a=!!localStorage.getItem("rememberMe"),i=Object(n.useState)(""),l=Object(T.a)(i,2),o=l[0],s=l[1],c=Object(n.useState)(a),m=Object(T.a)(c,2),p=m[0],g=m[1],h=function(){g(!p)},f=localStorage.getItem("rememberMe")?localStorage.getItem("rememberMe"):"";return r.a.createElement(_e.a,{initialValues:{email:f,password:""},validationSchema:Te.object().shape({email:Te.string().email("Email is invalid").required("Email is required"),password:Te.string().min(6,"Password must be at least 6 characters").required("Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password};t(function(e){return{type:"login_user",payload:u.a.post("".concat("/api/users","/login"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.loginSuccess?(window.localStorage.setItem("userId",t.payload.userId),!0===p?window.localStorage.setItem("rememberMe",a.id):localStorage.removeItem("rememberMe"),e.history.push("/")):s("Check out your Account or Password again")})).catch((function(e){s("Check out your Account or Password again"),setTimeout((function(){s("")}),3e3)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,i=(e.dirty,e.isSubmitting),l=e.handleChange,s=e.handleBlur,c=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement(Re,{level:2},"Log In"),r.a.createElement("form",{onSubmit:c,style:{width:"350px"}},r.a.createElement(Ne.a.Item,{required:!0},r.a.createElement(Me.a,{id:"email",prefix:r.a.createElement(Ie.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your email",type:"email",value:t.email,onChange:l,onBlur:s,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(Ne.a.Item,{required:!0},r.a.createElement(Me.a,{id:"password",prefix:r.a.createElement(Ie.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Enter your password",type:"password",value:t.password,onChange:l,onBlur:s,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),o&&r.a.createElement("label",null,r.a.createElement("p",{style:{color:"#ff0000bf",fontSize:"0.7rem",border:"1px solid",padding:"1rem",borderRadius:"10px"}},o)),r.a.createElement(Ne.a.Item,null,r.a.createElement(Pe.a,{id:"rememberMe",onChange:h,checked:p},"Remember me"),r.a.createElement("a",{className:"login-form-forgot",href:"/reset_user",style:{float:"right"}},"forgot password"),r.a.createElement("div",null,r.a.createElement(Ae.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{minWidth:"100%"},disabled:i,onSubmit:c},"Log in")),"Or ",r.a.createElement("a",{href:"/register"},"register now!"))))}))})),Ve=a(186),Le=a.n(Ve),Be={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},qe={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}};var We=function(e){var t=Object(d.b)();return r.a.createElement(_e.a,{initialValues:{email:"",lastName:"",name:"",password:"",confirmPassword:""},validationSchema:Te.object().shape({name:Te.string().required("Name is required"),lastName:Te.string().required("Last Name is required"),email:Te.string().email("Email is invalid").required("Email is required"),password:Te.string().min(6,"Password must be at least 6 characters").required("Password is required"),confirmPassword:Te.string().oneOf([Te.ref("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:function(a,n){var r=n.setSubmitting;setTimeout((function(){var n={email:a.email,password:a.password,name:a.name,lastname:a.lastname,image:"http://gravatar.com/avatar/".concat(Le()().unix(),"?d=identicon")};t(function(e){return{type:"register_user",payload:u.a.post("".concat("/api/users","/register"),e).then((function(e){return e.data}))}}(n)).then((function(t){t.payload.success?e.history.push("/login"):alert(t.payload.err.errmsg)})),r(!1)}),500)}},(function(e){var t=e.values,a=e.touched,n=e.errors,i=(e.dirty,e.isSubmitting),l=e.handleChange,o=e.handleBlur,s=e.handleSubmit;e.handleReset;return r.a.createElement("div",{className:"app"},r.a.createElement("h2",null,"Sign up"),r.a.createElement(Ne.a,Object.assign({style:{minWidth:"375px"}},Be,{onSubmit:s}),r.a.createElement(Ne.a.Item,{required:!0,label:"Name"},r.a.createElement(Me.a,{id:"name",placeholder:"Enter your name",type:"text",value:t.name,onChange:l,onBlur:o,className:n.name&&a.name?"text-input error":"text-input"}),n.name&&a.name&&r.a.createElement("div",{className:"input-feedback"},n.name)),r.a.createElement(Ne.a.Item,{required:!0,label:"Last Name"},r.a.createElement(Me.a,{id:"lastName",placeholder:"Enter your Last Name",type:"text",value:t.lastName,onChange:l,onBlur:o,className:n.lastName&&a.lastName?"text-input error":"text-input"}),n.lastName&&a.lastName&&r.a.createElement("div",{className:"input-feedback"},n.lastName)),r.a.createElement(Ne.a.Item,{required:!0,label:"Email",hasFeedback:!0,validateStatus:n.email&&a.email?"error":"success"},r.a.createElement(Me.a,{id:"email",placeholder:"Enter your Email",type:"email",value:t.email,onChange:l,onBlur:o,className:n.email&&a.email?"text-input error":"text-input"}),n.email&&a.email&&r.a.createElement("div",{className:"input-feedback"},n.email)),r.a.createElement(Ne.a.Item,{required:!0,label:"Password",hasFeedback:!0,validateStatus:n.password&&a.password?"error":"success"},r.a.createElement(Me.a,{id:"password",placeholder:"Enter your password",type:"password",value:t.password,onChange:l,onBlur:o,className:n.password&&a.password?"text-input error":"text-input"}),n.password&&a.password&&r.a.createElement("div",{className:"input-feedback"},n.password)),r.a.createElement(Ne.a.Item,{required:!0,label:"Confirm",hasFeedback:!0},r.a.createElement(Me.a,{id:"confirmPassword",placeholder:"Enter your confirmPassword",type:"password",value:t.confirmPassword,onChange:l,onBlur:o,className:n.confirmPassword&&a.confirmPassword?"text-input error":"text-input"}),n.confirmPassword&&a.confirmPassword&&r.a.createElement("div",{className:"input-feedback"},n.confirmPassword)),r.a.createElement(Ne.a.Item,qe,r.a.createElement(Ae.a,{onClick:s,type:"primary",disabled:i},"Submit"))))}))},He=a(1095);He.a.SubMenu,He.a.ItemGroup;var ze=function(e){return r.a.createElement(He.a,{mode:e.mode},r.a.createElement(He.a.Item,{key:"blog"},r.a.createElement("a",{href:"/"},"Blog")),r.a.createElement(He.a.Item,{key:"plan"},r.a.createElement("a",{href:"/plan"},"Plan")),r.a.createElement(He.a.Item,{key:"create"},r.a.createElement("a",{href:"/blog/create"},"Create")))};var Ue=Object(s.f)((function(e){var t=Object(d.c)((function(e){return e.user}));return t.userData&&!t.userData.isAuth?r.a.createElement(He.a,{mode:e.mode},r.a.createElement(He.a.Item,{key:"mail"},r.a.createElement("a",{href:"/login"},"Signin")),r.a.createElement(He.a.Item,{key:"app"},r.a.createElement("a",{href:"/register"},"Signup"))):r.a.createElement(He.a,{mode:e.mode},r.a.createElement(He.a.Item,{key:"logout"},r.a.createElement("a",{onClick:function(){u.a.get("".concat("/api/users","/logout")).then((function(t){200===t.status?setTimeout((function(){e.history.push("/login")}),1e3):alert("Log Out Failed")}))}},"Logout")))})),Ge=a(1099);a(1021);var Je=function(){var e=Object(n.useState)(!1),t=Object(T.a)(e,2),a=t[0],i=t[1];return r.a.createElement("nav",{className:"menu",style:{position:"fixed",zIndex:5,width:"100%"}},r.a.createElement("div",{className:"menu__logo"},r.a.createElement("a",{href:"/"},"Logo")),r.a.createElement("div",{className:"menu__container"},r.a.createElement("div",{className:"menu_left"},r.a.createElement(ze,{mode:"horizontal"})),r.a.createElement("div",{className:"menu_rigth"},r.a.createElement(Ue,{mode:"horizontal"})),r.a.createElement(Ae.a,{className:"menu__mobile-button",type:"primary",onClick:function(){i(!0)}},r.a.createElement(Ie.a,{type:"align-right"})),r.a.createElement(Ge.a,{title:"Basic Drawer",placement:"right",className:"menu_drawer",closable:!1,onClose:function(){i(!1)},visible:a},r.a.createElement(ze,{mode:"inline"}),r.a.createElement(Ue,{mode:"inline"}))))};function Qe(){return r.a.createElement(_.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(F.a,{color:"inherit",href:"https://thatcharles.github.io/"},"Yu-Lin Chung")," ",(new Date).getFullYear(),".")}var Ze=function(){return r.a.createElement(Qe,null)},Xe=Ce.a.Title;function Ye(e){var t=e.match.params.postId,a=Object(n.useState)([]),i=Object(T.a)(a,2),l=i[0],o=i[1];return Object(n.useEffect)((function(){var e={postId:t};u.a.post("/api/blog/getPostDetail",e).then((function(e){e.data.success?o(e.data.post):alert("Couldnt get post detail")}))}),[]),l.author?r.a.createElement("div",{style:{paddingTop:"80px"}},r.a.createElement("div",{className:"postPage",style:{width:"70%",margin:"3rem auto",backgroundColor:"white"}},r.a.createElement("div",{style:{margin:"80px 80px 80px 80px",paddingTop:"80px",paddingBottom:"80px"}},r.a.createElement(Xe,{level:2},l.author.name,"'s Post"),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(Xe,{level:4},l.createdAt)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:l.content}})))):r.a.createElement("div",{style:{width:"80%",margin:"3rem auto"}},"loading...")}var Ke=a(1092),$e=a(76),et=a(1090),tt=a(158),at=Ke.a.Meta;function nt(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)((function(){u.a.get("/api/blog/getBlogs").then((function(e){e.data.success?(console.log(e.data.blogs),i(e.data.blogs)):(alert("Couldn`t get blog`s lists"),console.log(e))}))}),[]);var l=a.map((function(e,t){return r.a.createElement($e.a,{key:t,lg:8,md:12,xs:24},r.a.createElement(Ke.a,{hoverable:!0,style:{width:370,marginTop:16},actions:[r.a.createElement(Ie.a,{type:"setting",key:"setting"}),r.a.createElement("a",{href:"/blog/edit/".concat(e._id)},r.a.createElement(Ie.a,{type:"edit",key:"edit"})),r.a.createElement("a",{href:"/blog/post/".concat(e._id)}," ",r.a.createElement(Ie.a,{type:"ellipsis",key:"ellipsis"}))]},r.a.createElement(at,{avatar:r.a.createElement(et.a,{src:e.author.image}),title:e.author.name,description:"This is the description"}),r.a.createElement("div",{style:{height:150,overflowY:"scroll",marginTop:10}},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}))))}));return r.a.createElement("div",{style:{paddingTop:"80px"}},r.a.createElement("div",{style:{width:"85%",margin:"auto auto auto auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,{variant:"h2",color:"primary",gutterBottom:!0,style:{fontWeight:"bold"}},"Blog Lists")),r.a.createElement(tt.a,{gutter:[32,16],style:{marginLeft:"90px"}},l)))}var rt=a(240),it=a.n(rt),lt=a(535),ot=a(73),st=a(159),ct=a(90),ut=a.n(ct),mt=(a(1035),!!navigator.userAgent.match(/Trident/i)),dt=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).getMetaTagElements=function(e){var t=document.createElement("div");return t.innerHTML=e,t.getElementsByTagName("meta")},e}return Object(S.a)(a,[{key:"onPaste",value:function(){var e=Object(lt.a)(it.a.mark((function e(t){var n,r,i,l=this;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clipboardData||window.clipboardData,e.next=3,n.getData("Text");case 3:r=e.sent,(i=r.match(/\b(http|https)?:\/\/\S+/gi)||[]).length>0?(t.preventDefault(),i.forEach((function(e){u.a.get(e).then((function(e){var t,a,n,r,i=Object(V.a)(l.getMetaTagElements(e));try{for(i.s();!(r=i.n()).done;){var o=r.value;"og:title"===o.getAttribute("property")&&(t=o.getAttribute("content")),"og:image"===o.getAttribute("property")&&(a=o.getAttribute("content")),"og:url"===o.getAttribute("property")&&(n=o.getAttribute("content"))}}catch(m){i.e(m)}finally{i.f()}var s="<a href=".concat(n,' target="_blank"><div><img src=').concat(a," alt=").concat(t,' width="20%"/><span>').concat(t,"</span></div></a>"),c=l.quill.getSelection(),u=c?c.index:0;l.quill.pasteHTML(u,s,"silent"),l.quill.setSelection(u+s.length)})).catch((function(e){return console.error(e)}))}))):Object(st.a)(Object(ot.a)(a.prototype),"onPaste",this).call(this,t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(ct.Quill.import("modules/clipboard"));ct.Quill.register("modules/clipboard",dt,!0);var pt=ct.Quill.import("blots/block/embed"),gt=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,null,[{key:"create",value:function(e){var t=Object(st.a)(Object(ot.a)(a),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("alt",e.alt),t.setAttribute("width","100%"),t}},{key:"value",value:function(e){return{src:e.getAttribute("src"),alt:e.getAttribute("alt")}}}]),a}(pt);gt.blotName="image",gt.tagName="img",ct.Quill.register(gt);var ht=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,null,[{key:"create",value:function(e){if(e&&e.src){var t=Object(st.a)(Object(ot.a)(a),"create",this).call(this);return t.setAttribute("src",e.src),t.setAttribute("title",e.title),t.setAttribute("width","100%"),t.setAttribute("controls",""),t}var n=document.createElement("iframe");return n.setAttribute("src",e),n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("width","100%"),n}},{key:"value",value:function(e){return e.getAttribute("title")?{src:e.getAttribute("src"),alt:e.getAttribute("title")}:e.getAttribute("src")}}]),a}(pt);ht.blotName="video",ht.tagName="video",ct.Quill.register(ht);var ft=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ucca8\ubd80\ud30c\uc77c - ";var n=document.createElement("b");n.innerText=e;var r=document.createElement("a");r.setAttribute("href",e),r.setAttribute("target","_blank"),r.setAttribute("className","file-link-inner-post"),r.appendChild(n);var i=Object(st.a)(Object(ot.a)(a),"create",this).call(this);return i.appendChild(t),i.appendChild(r),i}},{key:"value",value:function(e){return e.querySelector("a").getAttribute("href")}}]),a}(pt);ft.blotName="file",ft.tagName="p",ft.className="file-inner-post",ct.Quill.register(ft);var Et=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,null,[{key:"create",value:function(e){var t=document.createElement("span");t.innerText="\ud22c\ud45c - ";var n=document.createElement("b");n.innerText=e.title;var r=Object(st.a)(Object(ot.a)(a),"create",this).call(this);return r.setAttribute("id",e.id),r.appendChild(t),r.appendChild(n),r}},{key:"value",value:function(e){return{id:e.getAttribute("id"),title:e.querySelector("b").innerText}}}]),a}(pt);Et.blotName="poll",Et.tagName="p",Et.className="poll-inner-post",ct.Quill.register(Et);var vt=function(e){Object(O.a)(a,e);var t=Object(k.a)(a);function a(e){var n;return Object(y.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState({editorHtml:e},(function(){n.props.onEditorChange(n.state.editorHtml)}))},n.imageHandler=function(){n.inputOpenImageRef.current.click()},n.videoHandler=function(){n.inputOpenVideoRef.current.click()},n.fileHandler=function(){n.inputOpenFileRef.current.click()},n.insertImage=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];console.log(t);var a=new FormData;a.append("file",t),u.a.post("/api/blog/uploadfiles",a,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var a=n.reactQuillRef.getEditor();a.focus();var r=a.getSelection(),i=r?r.index:0;a.insertEmbed(i,"image",{src:"http://localhost:5000/"+e.data.url,alt:e.data.fileName}),a.setSelection(i+1),n._isMounted&&n.setState({files:[].concat(Object(J.a)(n.state.files),[t])},(function(){n.props.onFilesChange(n.state.files)}))}))}},n.insertVideo=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0],a=new FormData;a.append("file",t),u.a.post("/api/blog/uploadfiles",a,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(!e.data.success)return alert("failed to upload file");var a=n.reactQuillRef.getEditor();a.focus();var r=a.getSelection(),i=r?r.index:0;a.insertEmbed(i,"video",{src:"http://localhost:5000/"+e.data.url,title:e.data.fileName}),a.setSelection(i+1),n._isMounted&&n.setState({files:[].concat(Object(J.a)(n.state.files),[t])},(function(){n.props.onFilesChange(n.state.files)}))}))}},n.insertFile=function(e){if(e.stopPropagation(),e.preventDefault(),e.currentTarget&&e.currentTarget.files&&e.currentTarget.files.length>0){var t=e.currentTarget.files[0];console.log(t);var a=new FormData;a.append("file",t),u.a.post("/api/blog/uploadfiles",a,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.data.success){var a=n.reactQuillRef.getEditor();a.focus();var r=a.getSelection(),i=r?r.index:0;a.insertEmbed(i,"file",e.data.fileName),a.setSelection(i+1),n._isMounted&&n.setState({files:[].concat(Object(J.a)(n.state.files),[t])},(function(){n.props.onFilesChange(n.state.files)}))}}))}},n.modules={toolbar:{container:"#toolbar",handlers:{insertImage:n.imageHandler,insertVideo:n.videoHandler,insertFile:n.fileHandler,insertPoll:n.pollHandler}}},n.formats=["header","bold","italic","underline","strike","image","video","file","link","code-block","video","blockquote","clean"],n.state={editorHtml:mt?"<p>&nbsp;</p>":"",initial:!0,files:[]},n.reactQuillRef=null,n.inputOpenImageRef=r.a.createRef(),n.inputOpenVideoRef=r.a.createRef(),n.inputOpenFileRef=r.a.createRef(),n}return Object(S.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement("div",{id:"toolbar"},r.a.createElement("select",{className:"ql-header",defaultValue:"",onChange:function(e){return e.persist()}},r.a.createElement("option",{value:"1"}),r.a.createElement("option",{value:"2"}),r.a.createElement("option",{value:""})),r.a.createElement("button",{className:"ql-bold"}),r.a.createElement("button",{className:"ql-italic"}),r.a.createElement("button",{className:"ql-underline"}),r.a.createElement("button",{className:"ql-strike"}),r.a.createElement("button",{className:"ql-insertImage"},"I"),r.a.createElement("button",{className:"ql-insertVideo"},"V"),r.a.createElement("button",{className:"ql-insertFile"},"F"),r.a.createElement("button",{className:"ql-link"}),r.a.createElement("button",{className:"ql-code-block"}),r.a.createElement("button",{className:"ql-video"}),r.a.createElement("button",{className:"ql-blockquote"}),r.a.createElement("button",{className:"ql-clean"})),r.a.createElement(ut.a,{ref:function(t){e.reactQuillRef=t},theme:"snow",onChange:this.handleChange,modules:this.modules,formats:this.formats,value:this.state.editorHtml||"",placeholder:this.props.placeholder}),r.a.createElement("input",{type:"file",accept:"image/*",ref:this.inputOpenImageRef,style:{display:"none"},onChange:this.insertImage}),r.a.createElement("input",{type:"file",accept:"video/*",ref:this.inputOpenVideoRef,style:{display:"none"},onChange:this.insertVideo}),r.a.createElement("input",{type:"file",accept:"*",ref:this.inputOpenFileRef,style:{display:"none"},onChange:this.insertFile}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.editorHtml!==e.initialValue&&t.initial?{editorHtml:e.initialValue,initial:!1}:null}}]),a}(r.a.Component);function bt(e){var t=Object(d.c)((function(e){return e.user})),a=Object(n.useState)(""),i=Object(T.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),c=Object(T.a)(s,2),m=(c[0],c[1]),p=function(a){if(a.preventDefault(),o(""),t.userData&&!t.userData.isAuth)return alert("Please log in first");var n={content:l,author:t.userData._id};u.a.post("/api/blog/createPost",n).then((function(t){console.log(t),t.data.success&&(j.a.success("Post Created"),setTimeout((function(){e.history.push("/")}),2e3))}))};return r.a.createElement("div",{style:{paddingTop:"80px"}},r.a.createElement("div",{style:{maxWidth:"900px",margin:"2rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,{variant:"h2",color:"primary",gutterBottom:!0,style:{fontWeight:"bold"}},"Editor")),r.a.createElement(vt,{placeholder:"Start Posting Something",onEditorChange:function(e){o(e)},onFilesChange:function(e){m(e)}}),r.a.createElement(Ne.a,{onSubmit:p},r.a.createElement("div",{style:{textAlign:"center",margin:"2rem"}},r.a.createElement(Ae.a,{size:"large",htmlType:"submit",className:"",onSubmit:p},"Submit")))))}function yt(e){var t=Object(d.c)((function(e){return e.user})),a=Object(n.useState)(""),i=Object(T.a)(a,2),l=i[0],o=i[1],s=Object(n.useState)([]),c=Object(T.a)(s,2),m=(c[0],c[1]),p=e.match.params.postId,g=Object(n.useState)([]),h=Object(T.a)(g,2),f=(h[0],h[1]);Object(n.useEffect)((function(){var e={postId:p};u.a.post("/api/blog/getPostDetail",e).then((function(e){e.data.success?(f(e.data.post),e.data.post&&(console.log("original content:",e.data.post.content),o(e.data.post.content),console.log("content:",l))):alert("Couldn`t get post detail")}))}),[]);var E=function(a){if(a.preventDefault(),t.userData&&!t.userData.isAuth)return alert("Please log in first");var n={_id:p,content:l,author:t.userData._id};u.a.post("/api/blog/updatePost",n).then((function(t){console.log(t),t.data.success&&(j.a.success("Post Updated"),setTimeout((function(){e.history.push("/")}),2e3))}))};return r.a.createElement("div",{style:{paddingTop:"80px"}},r.a.createElement("div",{style:{maxWidth:"900px",margin:"2rem auto"}},r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,{variant:"h2",color:"primary",gutterBottom:!0,style:{fontWeight:"bold"}},"Editor")),r.a.createElement(vt,{initialValue:l,onEditorChange:function(e){o(e),console.log("content on change:",l)},onFilesChange:function(e){m(e)}}),r.a.createElement(Ne.a,{onSubmit:E},r.a.createElement("div",{style:{textAlign:"center",margin:"2rem"}},r.a.createElement(Ae.a,{size:"large",htmlType:"submit",className:"",onSubmit:E},"Submit")))))}var St=f()({palette:{primary:v.a},typography:{useNextVariants:!0},overrides:{MuiCssBaseline:{"@global":{body:{backgroundImage:"url("+a(1036)+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover",backgroundAttachment:"fixed",height:"200%"},html:{height:"100%"}}}},container:{width:"80%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}});var kt=function(){var e="pushState"in window.history;return r.a.createElement(g.a,{theme:St},r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(b.a,null),r.a.createElement(Je,null),r.a.createElement(o.a,{forceRefresh:!e},r.a.createElement("div",{className:"container"},r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:p(nt,null)}),r.a.createElement(s.a,{exact:!0,path:"/plan",component:p(De,null)}),r.a.createElement(s.a,{exact:!0,path:"/login",component:p(Fe,!1)}),r.a.createElement(s.a,{exact:!0,path:"/register",component:p(We,!1)}),r.a.createElement(s.a,{exact:!0,path:"/blog/post/:postId",component:p(Ye,null)})," ",r.a.createElement(s.a,{exact:!0,path:"/blog/create",component:p(bt,null)}),r.a.createElement(s.a,{exact:!0,path:"/blog/edit/:postId",component:p(yt,null)})))),r.a.createElement(Ze,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ot=a(120),jt=a(189),wt=Object(Ot.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"register_user":return Object(jt.a)({},e,{register:t.payload});case"login_user":return Object(jt.a)({},e,{loginSucces:t.payload});case"auth_user":return Object(jt.a)({},e,{userData:t.payload});case"logout_user":return Object(jt.a)({},e);default:return e}}}),xt=a(536),Dt=a.n(xt),_t=a(537),Tt=Object(Ot.a)(Dt.a,_t.a)(Ot.d);l.a.render(r.a.createElement(d.a,{store:Tt(wt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())},r.a.createElement(o.a,null,r.a.createElement(kt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},301:function(e,t,a){e.exports=a.p+"static/media/blue_circle.e95b2e68.svg"},553:function(e,t,a){e.exports=a(1040)},558:function(e,t,a){},740:function(e,t,a){e.exports=a.p+"static/media/parking.36a6661f.svg"},741:function(e,t,a){e.exports=a.p+"static/media/place.9399cadf.svg"}},[[553,1,2]]]);
//# sourceMappingURL=main.c1e6f0e0.chunk.js.map